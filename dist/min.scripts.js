let villagerRepository=function(){let e=[];function t(t){e.push(t)}function n(){return e}let l=null;function a(){l&&(l.remove(),l=null,document.body.classList.remove("modal-open"))}return document.getElementById("searchInput").addEventListener("input",function e(){let t=document.getElementById("searchInput").value.toLowerCase(),n=villagerRepository.getAll().filter(function(e){return e.name.toLowerCase().includes(t)});document.querySelector(".villager-list").innerHTML="",n.forEach(function(e){villagerRepository.addListItem(e)})}),{add:t,getAll:n,addListItem:function e(t){let n=document.querySelector(".villager-list"),i=document.createElement("li"),r=document.createElement("button");r.innerText=t.name,r.classList.add("villagerButton"),i.appendChild(r),n.appendChild(i),r.addEventListener("click",function(e){var n,i;let r,c,s,o,d,p,u;n=t,console.log(n),l&&l.remove(),(l=document.createElement("div")).classList.add("modal"),(r=document.createElement("div")).classList.add("modal-content"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="center",(c=document.createElement("h2")).innerText=n.name,r.appendChild(c),(s=document.createElement("img")).src=n.imageUrl,r.appendChild(s),(o=document.createElement("p")).innerText="Personality: "+n.personality,r.appendChild(o),(d=document.createElement("p")).innerText="Species: "+n.species,r.appendChild(d),(p=document.createElement("p")).innerText="Catchphrase: '"+(i=n.catchphrase,i.charAt(0).toUpperCase()+i.slice(1))+"'",r.appendChild(p),(u=document.createElement("button")).classList.add("close-button"),u.innerText="Close",u.addEventListener("click",a),r.appendChild(u),l.appendChild(r),document.body.appendChild(l),document.body.classList.add("modal-open"),l.addEventListener("click",function(e){e.target===l&&a()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&a()}),console.log(e)})},loadList:function e(){let n=document.createElement("div");n.classList.add("modal");let l=document.createElement("div");l.classList.add("modal-content");let a=document.createElement("p");return a.innerText="Fetching villagers...",l.appendChild(a),n.appendChild(l),document.body.appendChild(n),new Promise(e=>{setTimeout(()=>{e(fetch("https://acnhapi.com/v1/villagers/").then(function(e){return e.json()}).then(function(e){return n.remove(),Promise.all(Object.keys(e).slice(0,390).map(function(e){var n;return fetch("https://acnhapi.com/v1/villagers/"+(n=e)+"/").then(function(e){return e.json()}).then(function(e){let n={name:e.name["name-USen"]||"N/A",imageUrl:e.image_uri||"N/A",personality:e.personality,species:e.species,catchphrase:e["catch-translations"]["catch-USen"]||"N/A"};return t(n),n}).catch(function(e){console.error(e)})}))}).catch(function(e){console.error(e),n.remove()}))},2e3)})}}}();villagerRepository.loadList().then(function(e){e.forEach(function(e){villagerRepository.addListItem(e)})});